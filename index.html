<html>
<div id="root"></div>
<script src="https://unpkg.com/react@16.12.0/umd/react.development.js"></script>
<script src="https://unpkg.com/react-dom@16.12.0/umd/react-dom.production.min.js"></script>
<script src="https://unpkg.com/@babel/standalone@7.8.3/babel.min.js"></script>
<script src="https://unpkg.com/prop-types@15.6.1/prop-types.min.js"></script>
<script type="text/babel">
    const rootElement = document.getElementById('root')
    const Form = (props) => (
        <div>
            <form>
                <label htmlFor="name">Enter the name</label>
                <input
                    value={props.name}
                    id="name"
                    onChange={props.handleChange}
                />
            </form>
            {props.name ? `Hello ${props.name}` : 'Please enter you name'}
        </div>
    )

    // custom hook
    const useLocalStorage = ({key, defaultValue = ''}) => {
        const [state, setState] = React.useState(
            () => window.localStorage.getItem(key) || defaultValue)

        // on key value change store the key into the localstorage
        React.useEffect(() => {
            window.localStorage.setItem(key, state)
        }, [key, state])

        return [state, setState]
    }
    const Greeting = () => {
        const key = "name"
        const [name, setName] = useLocalStorage({key})
        const handleChange = (event) => setName(event.target.value)
        return <Form handleChange={handleChange} name={name}/>
    }

    ReactDOM.render(<Greeting/>, rootElement)
</script>
</html>